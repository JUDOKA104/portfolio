---
import "../styles/tailwind.css";
const {
  title = "Enzo Oriol — Portfolio",
  description = "Portfolio d'Enzo Oriol : dev Full-stack, Cybersécurité",
  image = "og-default.png" // chemin relatif = ok avec /portfolio
} = Astro.props;

const url = new URL(Astro.url.pathname, Astro.site).toString();
const base = import.meta.env.BASE_URL; // "/portfolio/"
---
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={url} />
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={new URL(image, Astro.site).toString()} />
    <meta property="og:url" content={url} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={new URL(image, Astro.site).toString()} />

    <link rel="icon" type="image/svg+xml" href={`${base}favicon.svg`} />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
      body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
      html { scroll-behavior:smooth }
      @media (prefers-reduced-motion: reduce) {
        html { scroll-behavior:auto }
      }
    </style>
  </head>
  <body class="min-h-screen bg-[var(--bg)] text-[var(--fg)]">
    <!-- barre de progression de scroll -->
    <div id="scrollbar" class="fixed top-0 left-0 z-50 bottom-10" style="width:0"></div>
    <script is:inline>
      (function(){
        const bar=document.getElementById('scrollbar');
        const upd=()=>{const h=document.documentElement; const s=h.scrollTop/(h.scrollHeight-h.clientHeight); bar.style.width=(s*100).toFixed(2)+'%';};
        addEventListener('scroll',upd,{passive:true}); addEventListener('resize',upd); upd();
      })();
    </script>

    <header class="sticky top-0 z-40 backdrop-blur border-b border-[var(--border)]/70 bg-[#0b0c0e]/60">
      <div class="max-w-5xl mx-auto px-5 py-4 flex items-center justify-between">
        <a href={base} class="font-extrabold text-lg tracking-tight">EO</a>
        <nav class="flex gap-5 text-sm">
          <a href={`${base}#profil`} class="hover:opacity-80">Profil</a>
          <a href={`${base}/projects`} class="hover:opacity-80">Projets</a>
          <a href={`${base}/resume`} class="hover:opacity-80">CV</a>
          <a href={`${base}/contact`} class="hover:opacity-80">Contact</a>
        </nav>
      </div>
    </header>

    <main class="max-w-5xl mx-auto px-5 pb-16">
      <slot />
    </main>

    <footer class="mt-10 border-t border-[var(--border)]/70 bg-[#0b0c0e]/50">
      <div class="max-w-5xl mx-auto px-5 py-10 grid gap-8 md:grid-cols-4">
        <!-- Brand -->
        <div>
          <a href={base} class="inline-flex items-center gap-3 no-underline">
            <div class="h-9 w-9 rounded-xl border border-[var(--border)] flex items-center justify-center">
              <span class="font-extrabold">EO</span>
            </div>
            <span class="font-semibold">Enzo Oriol</span>
          </a>
          <p class="mt-3 text-sm text-[var(--muted)] leading-relaxed">
            Développement full-stack, ERP Odoo 18, Linux & sécurité.  
            J’aime les solutions propres, documentées et prêtes pour la prod.
          </p>
        </div>

        <!-- Navigation -->
        <nav aria-label="Liens utiles">
          <h4 class="text-sm font-semibold tracking-wide uppercase text-[var(--muted)]/80">Navigation</h4>
          <ul class="mt-3 space-y-2 text-sm">
            <li><a class="no-underline hover:underline" href={`${base}#profil`}>Profil</a></li>
            <li><a class="no-underline hover:underline" href={`${base}/projects`}>Projets</a></li>
            <li><a class="no-underline hover:underline" href={`${base}/resume`}>CV</a></li>
            <li><a class="no-underline hover:underline" href={`${base}/contact`}>Contact</a></li>
          </ul>
        </nav>

        <!-- Contact -->
        <div aria-label="Contact">
          <h4 class="text-sm font-semibold tracking-wide uppercase text-[var(--muted)]/80">Contact</h4>
          <ul class="mt-3 space-y-2 text-sm text-[var(--muted)]">
            <li>
              <a class="no-underline hover:underline" href="mailto:oriol.enzo10@gmail.com" aria-label="Envoyer un email">
                oriol.enzo10@gmail.com
              </a>
            </li>
            <li>Lyon · Sud (Agde) — mobilité</li>
            <li>
              <a class="no-underline hover:underline" href={`${base}/cv.pdf`} download>
                Télécharger mon CV (PDF)
              </a>
            </li>
          </ul>
        </div>

        <!-- Réseaux -->
        <div aria-label="Réseaux & lien code">
          <h4 class="text-sm font-semibold tracking-wide uppercase text-[var(--muted)]/80">Réseaux</h4>
          <div class="mt-3 flex items-center gap-3">
            <!-- GitHub -->
            <a
              href="https://github.com/judoka104"
              target="_blank" rel="noreferrer"
              aria-label="GitHub"
              class="inline-flex items-center justify-center h-9 w-9 rounded-xl border border-[var(--border)] hover:border-[var(--accent)]/60 transition no-underline">
              <svg viewBox="0 0 24 24" class="h-5 w-5" fill="currentColor" aria-hidden="true"><path d="M12 .5a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.4-4-1.4-.6-1.5-1.5-1.9-1.5-1.9-1.2-.8.1-.8.1-.8 1.4.1 2.1 1.5 2.1 1.5 1.2 2.1 3.2 1.5 4 .9.1-.9.5-1.5.9-1.9-2.7-.3-5.6-1.4-5.6-6.3 0-1.4.5-2.6 1.3-3.5-.1-.3-.6-1.7.1-3.5 0 0 1.1-.4 3.6 1.3 1-.3 2-.4 3-.4s2 .1 3 .4c2.5-1.7 3.6-1.3 3.6-1.3.7 1.8.2 3.2.1 3.5.8.9 1.3 2.1 1.3 3.5 0 4.9-2.9 6-5.6 6.3.5.4 1 1.2 1 2.4v3.6c0 .3.2.7.8.6A12 12 0 0 0 12 .5Z"/></svg>
            </a>
            <!-- LinkedIn -->
            <a
              href="https://www.linkedin.com/in/enzo-oriol-81448832b"
              target="_blank" rel="noreferrer"
              aria-label="LinkedIn"
              class="inline-flex items-center justify-center h-9 w-9 rounded-xl border border-[var(--border)] hover:border-[var(--accent)]/60 transition no-underline">
              <svg viewBox="0 0 24 24" class="h-5 w-5" fill="currentColor" aria-hidden="true"><path d="M4.98 3.5C4.98 4.88 3.86 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 5 2.12 5 3.5zM.5 8.5h4V24h-4V8.5zm7.5 0h3.8v2.1h.1c.5-1 1.8-2.1 3.8-2.1 4 0 4.7 2.6 4.7 6V24h-4v-5.3c0-1.3 0-3-1.8-3s-2 1.4-2 2.9V24h-4V8.5z"/></svg>
            </a>
            <!-- Repo source -->
            <a
              href="https://github.com/judoka104/portfolio"
              target="_blank" rel="noreferrer"
              class="text-xs no-underline hover:underline ml-1"
              aria-label="Code source du site">
              Code source
            </a>
          </div>
        </div>
      </div>

      <!-- Barre du bas -->
      <div class="border-t border-[var(--border)]/70">
        <div class="max-w-5xl mx-auto px-5 py-5 flex flex-col md:flex-row items-center justify-between gap-3 text-xs text-[var(--muted)]">
          <div class="text-center md:text-left">
            © {new Date().getFullYear()} · Enzo Oriol — Tous droits réservés
          </div>
          <div class="flex items-center gap-3">
            <span class="hidden md:inline">Construit avec</span>
            <a href="https://astro.build/" target="_blank" rel="noreferrer" class="no-underline hover:underline">Astro</a>
            <span>·</span>
            <a href="https://pages.github.com/" target="_blank" rel="noreferrer" class="no-underline hover:underline">GitHub Pages</a>
            <span>·</span>
            <a href={`${base}sitemap.xml`} class="no-underline hover:underline">Sitemap</a>
          </div>
          <a href="#top" class="no-underline hover:underline" aria-label="Retour en haut">Retour ↑</a>
        </div>
      </div>
    </footer>

  </body>
</html>
